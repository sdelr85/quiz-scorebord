<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Scorebord</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body { 
    font-family: sans-serif; 
    background:#111; 
    color:#fff; 
    margin: 0;
    padding: 24px;
  }
  h1 { text-align:center; margin-top:0; }
  .actions {
    display:flex; 
    gap:12px; 
    justify-content:center; 
    margin: 12px 0 24px;
    flex-wrap: wrap;
  }
  button { 
    padding: 10px 20px; 
    font-size: 16px;
    cursor: pointer;
    background:#1f6feb;
    color:#fff;
    border: none;
    border-radius: 6px;
  }
  button:disabled { 
    opacity: .6; 
    cursor: not-allowed;
  }
  table { 
    border-collapse: collapse; 
    width: min(900px, 95%); 
    margin: 0 auto; 
    background:#111;
  }
  th, td { 
    padding: 12px 10px; 
    border-bottom: 1px solid #333; 
    text-align: center; 
  }
  thead th {
    position: sticky;
    top: 0;
    background: #0b0b0b;
    z-index: 1;
  }
  tr.hidden { 
    display: none; 
  }
  a { color:#58a6ff; text-decoration:none; }
  a:hover { text-decoration: underline; }
  .status {
    text-align:center; 
    color:#bbb; 
    margin: 16px 0;
  }
  .error {
    color:#ff7b72;
  }
</style>
</head>
<body>

<h1>üèÜ Scorebord</h1>

<div class="actions">
  <button id="revealBtn" disabled>Volgende team</button>
  <button id="revealAllBtn" disabled>Toon alle teams</button>
</div>

<div id="status" class="status">Gegevens laden‚Ä¶</div>

<table aria-label="Scorebord">
  <thead>
    <tr>
      <th>#</th>
      <th>Team</th>
      <th>Totaal</th>
    </tr>
  </thead>
  <tbody id="scoreboard"></tbody>
</table>

<script>
// === CSV URL ===
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTbCFR9XqM4nMvii1ZbzYpDcsoG8qONnw5w5MogMDWmwTNzCd7KhQ9kFw94jTGlWIWy6Vt-JsHsJokY/pub?gid=0&single=true&output=csv";

const statusEl = document.getElementById('status');
const revealBtn = document.getElementById('revealBtn');
const revealAllBtn = document.getElementById('revealAllBtn');
const tbody = document.getElementById('scoreboard');

let hiddenRows = [];

// === Helpers ===
function setStatus(msg, isError = false) {
  statusEl.textContent = msg || '';
  statusEl.classList.toggle('error', !!isError);
}

function safeSplitCSVLine(line) {
  // Simple splitter suitable for your data (no quoted commas expected).
  // If you might have commas inside values later, switch to PapaParse.
  return line.split(',').map(v => v.trim());
}

function parseCSV(text) {
  // Remove possible BOM from start, normalize line endings
  const clean = text.replace(/^\uFEFF/, '').replace(/\r\n/g, '\n').trim();

