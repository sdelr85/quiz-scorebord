<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Team details</title>
<style>
  body { font-family:sans-serif; background:#111; color:#fff; }
  table { margin:auto; border-collapse:collapse; }
  td, th { padding:8px 12px; border-bottom:1px solid #333; }
</style>
</head>
<body>

<h1 id="teamName" style="text-align:center"></h1>

<table id="details"></table>

<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTbCFR9XqM4nMvii1ZbzYpDcsoG8qONnw5w5MogMDWmwTNzCd7KhQ9kFw94jTGlWIWy6Vt-JsHsJokY/pub?gid=0&single=true&output=csv";

const token = new URLSearchParams(window.location.search).get("token");

fetch(CSV_URL)
  .then(r => r.text())
  .then(text => {
    const rows = text.trim().split("\n").map(r => r.split(","));
    const header = rows.shift();

    const teamRow = rows.find(r => r[1] === token);
    if (!teamRow) {
      document.body.innerHTML = "<h2>Team niet gevonden</h2>";
      return;
    }

    const team = {};
    header.forEach((h,i) => team[h] = teamRow[i]);

    document.getElementById("teamName").textContent = team.Team;

    const table = document.getElementById("details");
    header.filter(h => h.startsWith("R")).forEach(r => {
      const tr = document.createElement("tr");
      tr.innerHTML = `<td>${r}</td><td>${team[r]}</td>`;
      table.appendChild(tr);
    });
  });
</script>

</body>
</html>